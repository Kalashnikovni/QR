<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Encuesta en Vivo</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f0f4f8;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .container {
      background: white;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      width: 100%;
    }

    h1 {
      margin-top: 0;
      font-size: 1.8rem;
      text-align: center;
      color: #333;
    }

    .question {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }

    .option {
      background: #e3eaf3;
      border-radius: 8px;
      padding: 10px 15px;
      margin: 8px 0;
      cursor: pointer;
      transition: 0.3s;
    }

    .option:hover {
      background: #c7d7ec;
    }

    .results {
      margin-top: 1rem;
    }

    .result-bar {
      background: #4caf50;
      height: 20px;
      border-radius: 10px;
    }

    .next-btn {
      margin-top: 1.5rem;
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: none;
    }

    .next-btn:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Encuesta en Vivo</h1>
    <div id="quiz">
      <div class="question" id="question"></div>
      <div id="options"></div>
      <div class="results" id="results"></div>
      <button class="next-btn" id="nextBtn">Siguiente</button>
    </div>
  </div>

  <script>
    const questions = [
      {
        text: "¿Cuál es tu color favorito?",
        options: ["Rojo", "Azul", "Verde", "Amarillo"]
      },
      {
        text: "¿Qué preferís tomar?",
        options: ["Café", "Té", "Mate", "Agua"]
      },
      {
        text: "¿Qué sistema operativo usás?",
        options: ["Windows", "macOS", "Linux", "Otro"]
      }
    ];

    let current = 0;

    function showQuestion() {
      document.getElementById("results").innerHTML = "";
      document.getElementById("nextBtn").style.display = "none";
      const q = questions[current];
      document.getElementById("question").innerText = q.text;
      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      q.options.forEach((opt, index) => {
        const div = document.createElement("div");
        div.className = "option";
        div.innerText = opt;
        div.onclick = () => selectOption(index);
        optionsDiv.appendChild(div);
      });
    }

    function selectOption(selectedIndex) {
      const totalVotes = 100;
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      // Generar porcentajes aleatorios que sumen 100
      let remaining = totalVotes;
      const percentages = questions[current].options.map((_, i) => {
        if (i === questions[current].options.length - 1) return remaining;
        const value = Math.floor(Math.random() * (remaining / 2));
        remaining -= value;
        return value;
      });

      // Asegurarse que el índice seleccionado sea el que tenga el valor más alto (simulado)
      percentages[selectedIndex] += 15;

      questions[current].options.forEach((opt, i) => {
        const percent = Math.min(percentages[i], 100);
        const label = document.createElement("div");
        label.innerText = `${opt}: ${percent}%`;
        const bar = document.createElement("div");
        bar.className = "result-bar";
        bar.style.width = percent + "%";
        bar.style.marginBottom = "8px";
        resultsDiv.appendChild(label);
        resultsDiv.appendChild(bar);
      });

      document.querySelectorAll(".option").forEach(el => {
        el.style.pointerEvents = "none";
        el.style.opacity = 0.6;
      });

      document.getElementById("nextBtn").style.display = current < questions.length - 1 ? "inline-block" : "none";
    }

    document.getElementById("nextBtn").onclick = () => {
      current++;
      if (current < questions.length) {
        showQuestion();
      }
    };

    showQuestion();
  </script>
</body>
</html>
